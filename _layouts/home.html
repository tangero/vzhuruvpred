---
layout: default
---

<!-- Hero sekce s gradientn√≠m textem -->
<section class="hero-section">
    <div class="hero-grid">
        {% assign top_articles = site.posts | where: "topclanek", true | where_exp: "post", "post.categories contains 'videa' == false" %}
        {% if top_articles.size > 0 %}
            {% assign featured_post = top_articles.first %}
        {% else %}
            {% assign featured_post = site.posts | where_exp: "post", "post.categories contains 'videa' == false" | first %}
        {% endif %}
        {% if featured_post %}
        <article class="hero-main">
            <a href="{{ featured_post.url | relative_url }}" class="article-image-link">
                <div class="article-image">
                    {% if featured_post.image %}
                        <img src="{{ featured_post.image | relative_url }}" alt="{{ featured_post.title }}">
                    {% else %}
                        <img src="https://picsum.photos/800/450?random=1" alt="{{ featured_post.title }}">
                    {% endif %}
                    <span class="category-badge">{{ featured_post.category | default: featured_post.categories[0] | capitalize }}</span>
                    <div class="article-overlay">
                        <h2 class="article-title-overlay">{{ featured_post.title }}</h2>
                        <p class="article-excerpt-overlay">{{ featured_post.excerpt | strip_html | truncate: 150 }}</p>
                        <div class="article-meta-overlay">
                            <span class="author">‚ö° {{ featured_post.author | default: 'Redakce' }}</span>
                            <span class="date">{{ featured_post.date | date: "%d.%m.%Y" }}</span>
                        </div>
                    </div>
                </div>
            </a>
        </article>
        {% endif %}

        <div class="hero-sidebar">
            {% assign non_top_posts = site.posts | where_exp: "post", "post.topclanek != true" | where_exp: "post", "post.categories contains 'videa' == false" %}
            {% assign sidebar_posts = non_top_posts | slice: 0, 2 %}
            {% for post in sidebar_posts %}
            <article class="sidebar-article">
                <a href="{{ post.url | relative_url }}" class="article-image-link">
                    <div class="article-image">
                        {% if post.image %}
                            <img src="{{ post.image | relative_url }}" alt="{{ post.title }}">
                        {% else %}
                            <img src="https://picsum.photos/400/225?random={{ forloop.index }}1" alt="{{ post.title }}">
                        {% endif %}
                        <span class="category-badge">{{ post.category | default: post.categories[0] | capitalize }}</span>
                        <div class="sidebar-article-overlay">
                            <h3 class="sidebar-article-title-overlay">{{ post.title }}</h3>
                        </div>
                    </div>
                </a>
                <div class="sidebar-article-content">
                    <p class="sidebar-article-excerpt">{{ post.excerpt | strip_html | truncate: 100 }}</p>
                    <span class="date">{{ post.date | date: "%d.%m.%Y" }}</span>
                </div>
            </article>
            {% endfor %}
        </div>
    </div>
</section>


<!-- Co pr√°vƒõ h√Ωbe internetem v ƒåesku -->
<section class="trends-carousel-section" id="trending-section">
    <h2 class="section-title">üî• Co pr√°vƒõ h√Ωbe internetem v ƒåesku</h2>
    <div class="trends-carousel-container">
        <button class="carousel-btn carousel-prev" id="trends-prev" aria-label="P≈ôedchoz√≠">‚Äπ</button>
        <div class="trends-carousel-wrapper">
            <div class="trends-carousel" id="trends-carousel">
                {% if site.data.trends %}
                    {% for trend in site.data.trends.trends %}
                    <a href="{{ trend.news_url }}" target="_blank" class="trend-item">
                        <div class="trend-image">
                            {% if trend.picture %}
                                <img src="{{ trend.picture }}" alt="{{ trend.query }}" loading="lazy">
                            {% else %}
                                <div class="trend-placeholder">üî•</div>
                            {% endif %}
                        </div>
                        <div class="trend-content">
                            <span class="trend-query">{{ trend.query | upcase }}</span>
                            <h3 class="trend-title">{{ trend.news_title | truncate: 200 }}</h3>
                            <p class="trend-excerpt">{{ trend.source }} ‚Ä¢ {{ trend.traffic }}</p>
                        </div>
                    </a>
                    {% endfor %}
                {% else %}
                    <!-- Fallback data -->
                    <div class="trend-item">
                        <div class="trend-placeholder">‚è≥</div>
                        <div class="trend-content">
                            <span class="trend-query">NAƒå√çT√ÅN√ç</span>
                            <h3 class="trend-title">Trendy se naƒç√≠taj√≠...</h3>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
        <button class="carousel-btn carousel-next" id="trends-next" aria-label="Dal≈°√≠">‚Ä∫</button>
    </div>
</section>


<!-- Hlavn√≠ obsahov√° oblast s postrann√≠m panelem -->
<div class="content-layout">
    <div class="main-column">
        <!-- Sekce Nejnovƒõj≈°√≠ ƒçl√°nky -->
        <section class="recent-articles-section">
            <div class="section-header">
                <h2 class="section-title">Nejnovƒõj≈°√≠ ƒçl√°nky</h2>
            </div>
            
            <div class="articles-list">
                {% comment %}
                Zobrazujeme 10 nejnovƒõj≈°√≠ch ƒçl√°nk≈Ø kromƒõ prvn√≠ch 3 (kter√© jsou zobrazeny naho≈ôe)
                {% endcomment %}
                {% assign recent_posts = site.posts | offset: 3 | limit: 10 %}
                {% for post in recent_posts %}
                <article class="article-list-item">
                    <a href="{{ post.url | relative_url }}" class="article-link">
                        <div class="article-left-column">
                            <div class="article-image-small">
                                {% if post.image %}
                                    <img src="{{ post.image | relative_url }}" alt="{{ post.title }}">
                                {% else %}
                                    <img src="https://picsum.photos/120/80?random={{ forloop.index }}" alt="{{ post.title }}">
                                {% endif %}
                            </div>
                            <span class="category">{{ post.category | default: post.categories[0] | capitalize }}</span>
                        </div>
                        <div class="article-content-small">
                            <h3 class="article-title-small">{{ post.title }}</h3>
                            <p class="article-excerpt-small">
                                {{ post.excerpt | strip_html | truncate: 150 }}
                            </p>
                            <div class="article-meta-small">
                                <span class="date">{{ post.date | date: "%d.%m.%Y" }}</span>
                                <span class="read-time">{{ post.read_time | default: '5 min' }}</span>
                            </div>
                        </div>
                    </a>
                </article>
                {% endfor %}
            </div>
        </section>
    </div>

    <!-- Postrann√≠ panel -->
    <aside class="sidebar">
        <!-- Kompaktn√≠ video p≈ôehr√°vaƒç -->
        {% assign videos = site.media | where: "type", "video" | sort: "date" | reverse | limit: 5 %}
        {% if videos.size > 0 %}
        <div class="sidebar-section video-player-sidebar">
            <h3 class="sidebar-title">üìπ Video p≈ôehr√°vaƒç</h3>
            <div class="compact-video-player">
                <div class="video-container">
                    <video id="sidebar-video" preload="metadata" poster="" muted>
                        <source src="{{ '/audiolm/' | append: videos.first.file | relative_url }}" type="video/mp4">
                        V√°≈° prohl√≠≈æeƒç nepodporuje video tag.
                    </video>
                    
                    <!-- Overlay s nadpisem a play tlaƒç√≠tkem -->
                    <div class="video-overlay" id="video-overlay">
                        <div class="video-overlay-content">
                            <h4 class="video-overlay-title" id="video-overlay-title">{{ videos.first.title }}</h4>
                            <button class="play-button" id="play-current-video">
                                <svg width="50" height="50" viewBox="0 0 50 50">
                                    <circle cx="25" cy="25" r="25" fill="rgba(255,255,255,0.9)"/>
                                    <path d="M 20,15 35,25 20,35 Z" fill="#333"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Seznam dal≈°√≠ch vide√≠ pod p≈ôehr√°vaƒçem -->
                <div class="video-playlist-below">
                    <div class="video-playlist-items" id="video-playlist-items">
                        {% assign remaining_videos = videos | offset: 1 | limit: 3 %}
                        {% for video in remaining_videos %}
                        <a href="#" class="video-playlist-link" data-video-index="{{ forloop.index }}" data-video-src="{{ '/audiolm/' | append: video.file | relative_url }}" data-video-title="{{ video.title }}" data-video-description="{{ video.content | strip_html | truncate: 80 }}">
                            {{ video.title }}
                        </a>
                        {% endfor %}
                    </div>
                </div>
                
                <!-- Skryt√Ω seznam v≈°ech vide√≠ pro JavaScript -->
                <div id="sidebar-all-videos" style="display: none;">
                    {% for video in videos %}
                    <div class="sidebar-playlist-item" data-video-src="{{ '/audiolm/' | append: video.file | relative_url }}" data-video-title="{{ video.title }}" data-video-file="{{ video.file }}" data-video-description="{{ video.content | strip_html | truncate: 80 }}"></div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}
        
        <!-- Nejƒçtenƒõj≈°√≠ -->
        <div class="sidebar-section">
            <h3 class="sidebar-title">Nejƒçtenƒõj≈°√≠</h3>
            <ol class="trending-list">
                {% assign top_articles = site.posts | where: "topclanek", true | limit: 1 %}
                {% assign other_posts = site.posts | where_exp: "post", "post.topclanek != true" | limit: 4 %}
                {% assign popular_posts = top_articles | concat: other_posts %}
                {% for post in popular_posts %}
                <li class="trending-item">
                    <span class="trending-number">{{ forloop.index }}</span>
                    <a href="{{ post.url | relative_url }}">{{ post.title | truncate: 60 }}</a>
                </li>
                {% else %}
                <li class="trending-item">
                    <span class="trending-number">1</span>
                    <a href="#">P≈ôidejte prvn√≠ ƒçl√°nek</a>
                </li>
                {% endfor %}
            </ol>
        </div>

        <!-- Newsletter -->
        <div class="sidebar-section newsletter-box">
            <h3 class="sidebar-title">Newsletter Vzh≈Øru a vp≈ôed</h3>
            <p class="newsletter-text">Dost√°vejte nejd≈Øle≈æitƒõj≈°√≠ zpr√°vy o digitalizaci a transparentnosti p≈ô√≠mo do emailu</p>
            <form class="newsletter-form">
                <input type="email" placeholder="ahoj@example.com" class="newsletter-input">
                <button type="submit" class="newsletter-btn">Odeb√≠rat zdarma</button>
            </form>
        </div>

        <!-- Poƒças√≠ widget -->
        <div class="sidebar-section weather-widget">
            <h3 class="sidebar-title">Poƒças√≠ & Tech index</h3>
            <div class="weather-content">
                <div class="weather-today">
                    <div class="weather-icon-large">‚òÄÔ∏è</div>
                    <div class="weather-info">
                        <span class="temperature">24¬∞C</span>
                        <span class="weather-desc">Ide√°ln√≠ poƒças√≠ pro coding</span>
                    </div>
                </div>
            </div>
        </div>
    </aside>
</div>

<!-- P≈ôedn√°≈°ky sekce -->
<section class="lectures-section">
    <div class="section-header">
        <h2 class="section-title">üéì P≈ôedn√°≈°ky</h2>
        <a href="/prednasky/" class="section-link">Zobrazit v≈°echny ‚Üí</a>
    </div>
    
    <div class="lectures-grid">
        {% assign lectures = site.posts | where: "categories", "videa" | limit: 3 %}
        {% for lecture in lectures %}
        <article class="lecture-card">
            <a href="{{ lecture.url | relative_url }}" class="lecture-link">
                <div class="lecture-thumbnail">
                    {% if lecture.youtube_id %}
                        <img src="https://img.youtube.com/vi/{{ lecture.youtube_id }}/maxresdefault.jpg" 
                             alt="{{ lecture.title }}"
                             onerror="this.src='https://img.youtube.com/vi/{{ lecture.youtube_id }}/hqdefault.jpg'">
                        <div class="lecture-play-overlay">
                            <svg class="play-icon" viewBox="0 0 68 48" version="1.1" style="width: 68px; height: 48px;">
                                <path class="play-icon-bg" d="M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z" fill="#f00"></path>
                                <path d="M 45,24 27,14 27,34" fill="#fff"></path>
                            </svg>
                        </div>
                    {% elsif lecture.thumbnail %}
                        <img src="{{ lecture.thumbnail | relative_url }}" alt="{{ lecture.title }}">
                    {% else %}
                        <img src="https://picsum.photos/400/225?random={{ forloop.index }}50" alt="{{ lecture.title }}">
                    {% endif %}
                    <span class="lecture-duration">{% if lecture.duration %}{{ lecture.duration }}{% else %}15:00{% endif %}</span>
                </div>
                <div class="lecture-content">
                    <h3 class="lecture-title">{{ lecture.title | truncate: 60 }}</h3>
                    <p class="lecture-excerpt">{{ lecture.excerpt | strip_html | truncate: 200 }}</p>
                    <div class="lecture-meta">
                        <span class="lecture-author">{{ lecture.author | default: "Redakce" }}</span>
                        <span class="lecture-date">{{ lecture.date | date: "%d.%m.%Y" }}</span>
                    </div>
                    <div class="lecture-tags">
                        {% for tag in lecture.tags limit:3 %}
                            <span class="lecture-tag">#{{ tag }}</span>
                        {% endfor %}
                    </div>
                </div>
            </a>
        </article>
        {% endfor %}
    </div>
</section>

<script>
// Trends Carousel functionality
document.addEventListener('DOMContentLoaded', function() {
    const carousel = document.getElementById('trends-carousel');
    const prevBtn = document.getElementById('trends-prev');
    const nextBtn = document.getElementById('trends-next');
    
    if (carousel && prevBtn && nextBtn) {
        let scrollPosition = 0;
        const cardWidth = 370; // width of each card + gap
        
        // Calculate visible cards
        function getVisibleCards() {
            const containerWidth = carousel.parentElement.offsetWidth;
            return Math.floor(containerWidth / cardWidth);
        }
        
        // Update scroll position
        function updateScroll() {
            carousel.style.transform = `translateX(-${scrollPosition}px)`;
        }
        
        // Next button
        nextBtn.addEventListener('click', function() {
            const maxScroll = carousel.scrollWidth - carousel.parentElement.offsetWidth;
            const scrollAmount = cardWidth * getVisibleCards();
            
            if (scrollPosition < maxScroll) {
                scrollPosition = Math.min(scrollPosition + scrollAmount, maxScroll);
                updateScroll();
            } else {
                // Loop back to start
                scrollPosition = 0;
                updateScroll();
            }
        });
        
        // Previous button  
        prevBtn.addEventListener('click', function() {
            const scrollAmount = cardWidth * getVisibleCards();
            
            if (scrollPosition > 0) {
                scrollPosition = Math.max(scrollPosition - scrollAmount, 0);
                updateScroll();
            } else {
                // Loop to end
                scrollPosition = carousel.scrollWidth - carousel.parentElement.offsetWidth;
                updateScroll();
            }
        });
        
        // Auto-scroll every 5 seconds
        setInterval(function() {
            const maxScroll = carousel.scrollWidth - carousel.parentElement.offsetWidth;
            if (scrollPosition < maxScroll) {
                scrollPosition += cardWidth;
                if (scrollPosition > maxScroll) scrollPosition = maxScroll;
            } else {
                scrollPosition = 0;
            }
            updateScroll();
        }, 5000);
        
        // Touch/swipe support for mobile
        let startX = 0;
        let isDragging = false;
        
        carousel.addEventListener('touchstart', function(e) {
            startX = e.touches[0].clientX;
            isDragging = true;
        });
        
        carousel.addEventListener('touchmove', function(e) {
            if (!isDragging) return;
            e.preventDefault();
            const x = e.touches[0].clientX;
            const diff = startX - x;
            
            if (Math.abs(diff) > 50) {
                if (diff > 0) {
                    nextBtn.click();
                } else {
                    prevBtn.click();
                }
                isDragging = false;
            }
        });
        
        carousel.addEventListener('touchend', function() {
            isDragging = false;
        });
    }
});

document.addEventListener('DOMContentLoaded', function() {
    const videoPlayer = document.getElementById('sidebar-video');
    const videoOverlay = document.getElementById('video-overlay');
    const videoOverlayTitle = document.getElementById('video-overlay-title');
    const playButton = document.getElementById('play-current-video');
    
    let currentVideoIndex = 0;
    const allVideos = Array.from(document.querySelectorAll('#sidebar-all-videos .sidebar-playlist-item'));
    const playlistLinks = Array.from(document.querySelectorAll('.video-playlist-link'));
    
    if (!videoPlayer || !videoOverlay) return;
    
    // Play current video
    playButton.addEventListener('click', function() {
        videoPlayer.play();
        videoOverlay.style.display = 'none';
    });
    
    // Show overlay when video is paused
    videoPlayer.addEventListener('pause', function() {
        videoOverlay.style.display = 'flex';
    });
    
    // Hide overlay when video is playing
    videoPlayer.addEventListener('play', function() {
        videoOverlay.style.display = 'none';
    });
    
    // Click on video to play/pause
    videoPlayer.addEventListener('click', function() {
        if (videoPlayer.paused) {
            videoPlayer.play();
        } else {
            videoPlayer.pause();
        }
    });
    
    // Play video from playlist links below
    playlistLinks.forEach((link, index) => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            // P≈ôepoƒç√≠tat index pro cel√Ω seznam vide√≠ (prvn√≠ video + index z linku)
            const videoIndex = index + 1;
            currentVideoIndex = videoIndex;
            loadVideo(videoIndex);
            updatePlaylistLinks();
            videoPlayer.play();
        });
    });
    
    // Video thumbnail mapping
    const videoThumbnails = {
        'veslejsi-ucinky-leku-glp-1': '/assets/obrazky/leky-na-hubnuti.jpg',
        'dilema-airbnb--pohodli-vs': '/assets/obrazky/dilema-airbnb.jpg',
        'qanon-ekosystem-konspiraci': '/assets/obrazky/qanon-puvod-konspiraci.jpg',
        'tiatm6lmtmx34': '/assets/obrazky/audio-track.jpg'
    };

    // Load video function
    function loadVideo(index) {
        const item = allVideos[index];
        const videoSrc = item.dataset.videoSrc;
        const videoTitleText = item.dataset.videoTitle;
        const videoFile = item.dataset.videoFile;
        
        videoPlayer.src = videoSrc;
        videoOverlayTitle.textContent = videoTitleText;
        
        // Aktualizovat thumbnail podle video souboru
        const thumbnailImg = document.getElementById('video-thumbnail-img');
        if (thumbnailImg && videoFile) {
            const videoKey = videoFile.replace(/\.(mp4|m4a)$/, '').toLowerCase().replace(/[^a-z0-9]/g, '-');
            const thumbnailPath = videoThumbnails[videoKey] || '/assets/obrazky/video-placeholder.jpg';
            thumbnailImg.src = thumbnailPath;
            thumbnailImg.alt = videoTitleText;
        }
        
        // Show overlay initially
        videoOverlay.style.display = 'flex';
    }
    
    // Update playlist links to exclude current video
    function updatePlaylistLinks() {
        const playlistContainer = document.getElementById('video-playlist-items');
        if (!playlistContainer) return;
        
        playlistContainer.innerHTML = '';
        
        let addedCount = 0;
        allVideos.forEach((video, index) => {
            if (index !== currentVideoIndex && addedCount < 3) {
                const link = document.createElement('a');
                link.href = '#';
                link.className = 'video-playlist-link';
                link.textContent = video.dataset.videoTitle;
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    currentVideoIndex = index;
                    loadVideo(index);
                    updatePlaylistLinks();
                    videoPlayer.play();
                });
                playlistContainer.appendChild(link);
                addedCount++;
            }
        });
    }
    
    // Auto-play next video when current ends
    videoPlayer.addEventListener('ended', function() {
        currentVideoIndex = currentVideoIndex < allVideos.length - 1 ? currentVideoIndex + 1 : 0;
        loadVideo(currentVideoIndex);
        updatePlaylistLinks();
        videoPlayer.play();
    });
    
    // Initialize first load
    loadVideo(currentVideoIndex);
    updatePlaylistLinks();
    
    // Show overlay initially
    videoOverlay.style.display = 'flex';
    console.log('Video player initialized');
});
</script>