---
layout: default
---

<div class="world-news-page">
    <div class="container">
        <div class="page-header">
            <h1 class="page-title">üåç {{ page.title }}</h1>
            <p class="page-description">{{ page.description }}</p>
            {% if site.data.world_news.updated %}
            <p class="last-updated">
                Posledn√≠ aktualizace: {{ site.data.world_news.updated | date: "%d.%m.%Y v %H:%M" }}
            </p>
            {% endif %}
        </div>
        
        <div class="world-news-grid">
            {% if site.data.world_news.articles %}
                {% for article in site.data.world_news.articles limit:20 %}
                <article class="world-news-item">
                    {% if article.urlToImage %}
                    <div class="news-image" data-fallback-flag="{{ article.flag | default: 'üì∞' }}" data-fallback-description="{{ article.description | default: '' }}" data-fallback-source="{{ article.source | default: 'Svƒõtov√© zpr√°vy' }}">
                        <img src="{{ article.urlToImage }}" alt="{{ article.title }}" loading="lazy" onerror="handleImageError(this)">
                    </div>
                    {% else %}
                    <div class="news-image news-placeholder">
                        <div class="news-placeholder-content">
                            <span class="news-placeholder-icon">{{ article.flag | default: "üì∞" }}</span>
                            {% if article.description and article.description != "" %}
                            <p class="news-placeholder-text">{{ article.description | truncate: 120 }}</p>
                            {% else %}
                            <p class="news-placeholder-text">{{ article.source | default: "Svƒõtov√© zpr√°vy" }}</p>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}
                    
                    <div class="news-content">
                        <div class="news-meta">
                            <span class="news-flag">{{ article.flag | default: "üåç" }}</span>
                            <span class="news-source">{{ article.source }}</span>
                            {% if article.publishedAt %}
                            <time class="news-time">{{ article.publishedAt | date: "%H:%M" }}</time>
                            {% endif %}
                        </div>
                        
                        <h2 class="news-title">
                            <a href="{{ article.url }}" target="_blank" rel="noopener">
                                {{ article.title }}
                            </a>
                        </h2>
                        
                        
                        {% if article.description %}
                        <p class="news-description">{{ article.description }}</p>
                        {% endif %}
                        
                        <div class="news-actions">
                            <a href="{{ article.url }}" target="_blank" class="read-more-btn" rel="noopener">
                                ƒå√≠st cel√Ω ƒçl√°nek <span class="external-icon">‚Üó</span>
                            </a>
                        </div>
                    </div>
                </article>
                {% endfor %}
            {% else %}
                <div class="no-news">
                    <p>Zpr√°vy se pr√°vƒõ naƒç√≠taj√≠... Zkuste to za chv√≠li.</p>
                </div>
            {% endif %}
        </div>
        
        <div class="news-footer">
            <p><small>
                Zpr√°vy jsou automaticky p≈ôelo≈æeny do ƒçe≈°tiny pomoc√≠ AI. 
                Zdroj: <a href="https://newsapi.org" target="_blank">NewsAPI.org</a>
            </small></p>
        </div>
    </div>
</div>

<script>
function handleImageError(img) {
    const container = img.parentNode;
    const flag = container.dataset.fallbackFlag || 'üì∞';
    const description = container.dataset.fallbackDescription;
    const source = container.dataset.fallbackSource || 'Svƒõtov√© zpr√°vy';
    
    // Rozhodni, co zobrazit - description nebo source
    let fallbackText = source;
    if (description && description.trim() !== '') {
        fallbackText = description.length > 120 ? description.substring(0, 120) + '...' : description;
    }
    
    // Nahraƒè obsah placeholderem
    container.innerHTML = `
        <div class="news-placeholder-content">
            <span class="news-placeholder-icon">${flag}</span>
            <p class="news-placeholder-text">${fallbackText}</p>
        </div>
    `;
    
    // P≈ôidej CSS t≈ô√≠du pro styling
    container.classList.add('news-placeholder');
}
</script>